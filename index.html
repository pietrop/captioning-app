<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Captions Maker</title>

  <!-- Latest compiled and minified CSS -->
  <!-- TODO: move to local folder -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/paper/bootstrap.min.css" >
  <!-- Latest compiled and minified JavaScript -->
  <script src="https://www.youtube.com/iframe_api"></script>
 
  </head>
  <body>



<nav class="navbar navbar-inverse">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-2">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="#">Captions Maker</a>
    </div>

    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-2">
    
      <form class="navbar-form navbar-left" role="search">
        <div class="form-group">
          <input type="text" id="videoYoutubeUrlInput" class="form-control" placeholder="Add Youtube URL" value="https://youtu.be/CrpkZkwTvu0" >
          <!--  https://youtu.be/pWZAF3j_jA4 -->
        </div>
        <button type="submit" id="loadYoutubeUrlBtn" class="btn btn-primary">Load</button>

      </form>
      <ul class="nav navbar-nav">
        <form class="navbar-form navbar-left" role="search">
          <a  id="selectFileBtn" class="btn btn-primary">Select file</a>
        </form>
            <!--  <li><a href="#">Link</a></li> -->
      </ul>
      <ul class="nav navbar-nav navbar-right">
       <!-- li -->
      </ul>
    </div>
  </div>
</nav>

<div class="container" >
  <div class="row">
    <div class="col-xs-12 col-sm-3  col-md-3  col-lg-3">
      <!-- <label for="select" class="control-label">Video preview</label> -->
      <!-- <a  id="selectFileBtn" class="btn btn-primary btn-xs ">Select file</a> -->
         <!-- <br><br> -->
      <div id="videoPreview" class="embed-responsive embed-responsive-16by9">
      </div>

<br><br>
      <div id="demoNoticeDiv"></div>


    <!--   <div id="player"></div> -->
    </div>
    <div class="col-xs-12 col-sm-7  col-md-7  col-lg-7">
      <!-- <label for="select" class="control-label">Text</label> -->
      <div id="textBox"  class="form-control"  contenteditable="true"></div>
    </div>
    <div class="col-xs-12 col-sm-2  col-md-2  col-lg-2">
      <!-- Info -->

 <div class="form-group">
       <a id="installAeneas" class="btn btn-default btn-xs" href="https://github.com/sillsdev/aeneas-installer/releases" target="_blank">Install Aneneas aligner</a>
        <a id="alignBtn" class="btn btn-primary btn-xs" href="#">Align</a>
        <a id="exportSrtBtn" class="btn btn-primary btn-xs" href="#">Export</a>
 </div>
      <div class="checkbox">
        <label>
          <input id="checkboxInput" type="checkbox" > <small>Pause video while typing </small>
        </label>
      </div>
       <label for="inputEmail" class="control-label">Head Tail</label>
       <input type="text" class="form-control" id="inputHeadTail" placeholder="head tail" value="00:00:00,000" disabled>
       <label for="inputEmail" class=" control-label">End Tail</label>
       <input type="text" class="form-control" id="inputEndTail" placeholder="End tail" value="00:00:00,000" disabled>
       <!-- <a id="searchBtn" class="btn btn-default btn-xs" href="#">search</a> -->

<div class="form-group">
  <!-- Espeek languages http://espeak.sourceforge.net/languages.html -->
      <label for="select" class=" control-label">Languages for alignement</label>
        <select class="form-control" id="select" disabled>
          <option value="eng">English</option>
          <option value="it">Italian</option>
          <option value="af">  Afrikaans </option>
          <option value="bs">  Bosnian </option>
          <option value="ca">  Catalan </option>
          <option value="cs">  Czech </option>
          <option value="da">  Danish </option>
          <option value="de">  German </option>
          <option value="el">  Greek </option>
          <option value="eo">  Esperanto </option>
          <option value="es">  Spanish </option>
          <option value="es-la">  Spanish - Latin America </option>
          <option value="fi">  Finnish </option>
          <option value="fr">  French </option>
          <option value="hr">  Croatian </option>
          <option value="hu">  Hungarian </option>
          <option value="lv">  Latvian </option>
          <option value="nl">  Dutch </option>
          <option value="pl">  Polish </option>
          <option value="pt">  Portuguese (Brazil) </option>
          <option value="pt-pt">  Portuguese (European) </option>
          <option value="ro">  Romanian </option>
          <option value="sk">  Slovak </option>
          <option value="sr">  Serbian </option>
          <option value="sv">  Swedish </option>
          <option value="sw">  Swahihi </option>
          <option value="ta">  Tamil </option>
          <option value="tr">  Turkish </option>
          <option value="zh">  Mandarin Chinese </option>
        </select>
    </div>





    </div>
  </div>
</div>

<style>
#textBox{
  width: 100%;
  height: 700px;
  overflow: scroll;
  background: #fff;
  box-shadow: 0 0 10px #ccc;
  padding: 50px;
}
body{
      background: #f1f1f1;
}
</style>

 <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" ></script>
<!-- ./node_modules/bootstrap/dist/js/bootstrap.min.js -->
</body>
    <!-- All of the Node.js APIs are available in this renderer process. -->
  <script>
    // You can also require other files to run in this process
    if(window.process!=undefined){
      require('./renderer.js')
    }else{
      // run demo code. 
//////////////////////////////////////////////////////////
// demo notice
var demoNotice =`<div class="alert alert-dismissible alert-warning">
  <button type="button" class="close" data-dismiss="alert">&times;</button>
  <h4>Dummy Demo!</h4>
  <p>This is a dummy demo of the app, not all the feature work, and it's for demonstratioon purposes only, it is not a web app. click on <b>load</b> and then <b>align</b> for a demonstration of what the app can do.
  For any questions feel free to get in touch, via <a href="mailto:pietro.passarelli@gmail.com">email</a> or <a href="https://twitter.com/pietropassarell" target="_blank">@pietropassarell</a></p>
</div>`;

document.getElementById('demoNoticeDiv').innerHTML = demoNotice;
      // on click of youtube video load populate video player
      // populate with dummy text
      // Align populate with dummy srt text example
   
var alignBtnEl = document.getElementById('alignBtn');
var exportSrtBtnEl = document.getElementById('exportSrtBtn');
var selectFileBtnEl = document.getElementById('selectFileBtn');
var loadYoutubeUrlBtnEl = document.getElementById('loadYoutubeUrlBtn');
var videoYoutubeUrlInputEl = document.getElementById('videoYoutubeUrlInput');
var videoPreviewEl = document.getElementById('videoPreview');
var textBoxEl = document.getElementById('textBox');
var checkboxInputEl = document.getElementById('checkboxInput');

var isYoutubeVideo = true;
var timeout = null;
var resumeTiypingTimeInterval = 600;
var startStopPlayingVideoOntyping = false;


checkboxInputEl.onclick = function(e){
  // e.preventDefault();
  if(startStopPlayingVideoOntyping == false){
    startStopPlayingVideoOntyping = true;
  }else{
    startStopPlayingVideoOntyping = false;
  }
};


loadYoutubeUrlBtnEl.onclick = function(e){
  e.preventDefault();
  isYoutubeVideo = true;
  // disableTextEditorProgressMessage();
  var url = videoYoutubeUrlInputEl.value;
  //TODO: add validation to check it's a valid youtube URL.
  var youtubeId = youtubeUrlExtractId(url);
  populateYoutubePlayer(youtubeId);

  //TODO: can I use path .join here to add extension to name?
  // var destFileName = dataPath+"/"+ youtubeId+".mp4";
   // sourceVideoPath = destFileName;
  // downloadYoutubeVideo(url, function(destPath){
  //   sourceVideoPath = destPath;
  //   console.log("sourceVideoPath+ ",sourceVideoPath)
  
  //   downloadCaptions(url, function(captionFiles){
  //     if (captionFiles.length ==0){
  //       alert("This video has no captions");
  //     }else{
  //       var captionFile = captionFiles[0];
  //       console.log("1,openYoutubeVttFile");
  //       openYoutubeVttFile(path.join(dataPath,captionFile));
  //       // var captionsContent = openFile(captionFiles[0]);
        
  //       console.log(captionFile);
  //     }
  //   }); 
  // });
};

function youtubeUrlExtractId(url){
  var urlParts = url.split("/");
  var urlPartsLegth = urlParts.length;
  var youtubeId = urlParts[urlPartsLegth-1]
  return youtubeId;
}

function populateYoutubePlayer(id){
  console.log(id);
  //simple implementation 
  var youtubeElement = `<iframe id="youtubeIframe" width='560' height='315' class='embed-responsive-item' src="https://www.youtube.com/embed/${id}" frameborder="0" allowfullscreen></iframe>`;
  // var youtubeElement = `<video width="640" height="360"><source type="video/youtube" src="http://www.youtube.com/watch?v=${id}" /></video>`
  videoPreviewEl.innerHTML = youtubeElement;
  // document.querySelector( 'video' ).addEventListener("playing", checkIfTypingPause, false);
  document.getElementById('youtubeIframe').onload= function() {
    var iframe = document.querySelector('iframe');
    var innerDoc = iframe.contentDocument || iframe.contentWindow.document;
    //start video 
    //TODO: decide whether to enable this or not. maybe make as an option?
    // innerDoc.querySelectorAll('video')[0].click();
    
    initializeVideoPlayPuaseTypingPreferences();
  };

  loadEditorEith(demoText);
}

function loadEditorEith(content){
    textBoxEl.innerText = content
}


alignBtnEl.onclick = function(){
  loadEditorEith(demoSrtContent)
  makeSrtTimeCodesIntoLinks()
  addLinksToSrtTimecodes()
}


 function makeSrtTimeCodesIntoLinks () {
    // console.log(textBoxEl.innerHTML);
    //http://pietropassarelli.com/regex.html
    textBoxEl.innerHTML = textBoxEl.innerHTML.replace(/(\d{2}[:|.]\d{2}[:|.]\d{2}[.|,|:]\d{3})/ig , function replace(match) { //(?!<)
        return '<a class="timecodeLink">' + match + '</a>'; 
    });
    //TODO: Move curson back to it's possition after replacement editable
    
    //add event listener on class name. 
    //https://stackoverflow.com/questions/19655189/javascript-click-event-listener-on-class
};




function addLinksToSrtTimecodes(){
  var timecodesEl = document.querySelectorAll('.timecodeLink');

  timecodesEl.forEach(function(element, index){
    element.onclick = function(){
      setVideoCurrentTime(element.innerText)
    }
  })
}

function setVideoCurrentTime(timecode){

  //convert timecode
  var time = convertTimeCodeToSeconds(timecode);
  
  if(isYoutubeVideo){
    var iframe = document.querySelector('iframe');
    var innerDoc = iframe.contentDocument || iframe.contentWindow.document;
    // innerDoc.querySelectorAll('video')[0].click();
    innerDoc.querySelectorAll('video')[0].currentTime = time;
    playVideo();
  }
}

function convertTimeCodeToSeconds(timeString){

  var timeArray = timeString.split(":");

  var hours   = parseFloat(timeArray[0]) * 60 * 60;
  var minutes = parseFloat(timeArray[1]) * 60;
  var seconds = parseFloat(timeArray[2].replace(",","."));
  // var frames  = parseInt(timeArray[3].split(",")[1])*(1/framerate);
  // var str = "h:" + hours + "\nm:" + minutes + "\ns:" + seconds + "\nf:" + frames;
  // console.log(str);
  var totalTime = hours + minutes + seconds// + frames;

  //alert(timeString + " = " + totalTime)
  return totalTime;
}

function playVideo(){
  console.log("play video ");
  // document.querySelector( 'video' ).play();
  if(isYoutubeVideo){
    var iframe = document.querySelector('iframe');
    var innerDoc = iframe.contentDocument || iframe.contentWindow.document;

    if(innerDoc.querySelectorAll('video')[0].src ==""){
      innerDoc.querySelectorAll('video')[0].click();
    }else{
      innerDoc.querySelectorAll('video')[0].play();
    }
    
  }
    
}

function pauseVideo(){
  if(isYoutubeVideo){
    var iframe = document.querySelector('iframe');
    var innerDoc = iframe.contentDocument || iframe.contentWindow.document;
    // document.querySelector( 'video' ).pause();
    innerDoc.querySelectorAll('video')[0].pause();
  }
  
}


    var demoText =`Yeah this is me I'm about to go scuba diving. For the first time ever, I was in expecting muffled peace and quiet. I mean one of the earliest documentaries on underwater life was literally called the silent world. They roamed deep under the Mediterranean, the Red Sea and the Indian Ocean in a mysterious realm, the silent world, but as soon as I got down a few yards, I couldn't help but notice sound all around me. It was hard to tell what direction it was coming from or how far away it was. It was coming from both above me, as far as I can tell, the Earth's water is not as quiet as I thought. I'Ve been binging this podcast all about sound and they've, been looking into this too from the facto sound you're listening to 20,000 Hertz. The stories behind the world's most recognizable and interesting sounds I'm Dallas Taylor, so Dallas life underwater can be pretty loud right. It can just listen to these toadfish. They oscillate their swim bladders to make sounds that are loud enough to keep houseboat residents in Sausalito California up at night or these barred grunt fish that make a grinding sound with their teeth and their gullet or the snapping shrimp. They produce a sound by creating tiny, popping bubbles with their claws and it's been measured at 200 decibels. That'S louder than a gunshot light doesn't penetrate very deep in water. So a lot of ocean life has evolved to use sound as its primary sense, because water particles are more densely packed together than air sound travels farther and faster in water. That makes it an efficient medium of communication at any depth or time of day. Let'S say we had 440 is like the middle key. You know of your piano or whatever. That'S John Hildebrand he's a professor at the Scripps Institution of Oceanography, he's an expert in the field of underwater sound and how it's used by and how it affects marine mammals. If you looked at the wavelength of that sound in air that note the 440 note would be a little bit less than a meter long in water, it's more like several meters long! What that means is that noise travels about four times faster and farther in water than it does an air in an experiment. In 1991, sound emitted from heard island was picked up at 16 sites in the Atlantic, Pacific and Indian Oceans. It turns out that one of the most common noises in the entire ocean that can be picked up almost anywhere. These days sounds like this. It'S the sound of boats. Noise from ship traffic has doubled every decades of the 1960s. So, basically anywhere you go, the ambient noise in the ocean is dominated by anthropogenic sound. Let'S say I made a measurement 30 years ago and now, if I win to the same place and made the same measurement, it would be 10 GBS or more higher sound level than what I measured. When I started my career, that's okey! That'S a huge problem for animals that you sound is their primary sense. Just listen to this audio of how noise from a passing boat, totally drowns out. Dolphin communication, [ Applause, ], Oh, but arguably the worst culprit of underwater sound pollution is a process that sounds like this. This is seismic survey. It'S a process that allows companies to locate spots on the ocean floor where they control for fossil fuels. Boats with about 30 to 40 air guns that all go off at once will move back and forth over large parts of the ocean bubbles from the horns, expand and contract to the clay every 10 seconds, treating a huge amount of acoustic energy that maps geological structures. Deep in the ocean floor and it's about as loud as a jet at takeoff, this can go on for weeks. At a time. A study of seismic survey noise between 1999 and 2009 found that airgun sounds were recorded almost 2500 miles away from the survey ship itself. At some locations they were recorded on 80 % of days for over a year and that changes how animals behave. A study by the Institute of Marine Science at the University of North Carolina found that reef fish abundance decreased by 78 % during seismic surveys. This is what the reef looks like before seismic surveying in the area, and this is what it looks like after seismic surveying is a controversial topic at the coast, and new research is only adding to the conversation. One of those impacted is local fisherman, Jack Kok he's seen firsthand the impact seismic surveying has on fish. It does something we just don't catch fish for animals like whales who rely on complex, sound communication systems to socialise and find food and mate that poses a huge problem. If you watch this heat map from a study of endangered North Atlantic right whales, you can see that shipping past near Boston squeeze the whales into a tiny space where communication is possible. It'S about a third of what it was without the ships. Susan parks, a biology. Professor at Syracuse recorded right whale sounds throughout the early 2000s and when she compared her audio to some that had been recorded in 1956, she noticed the older sounds were much deeper than her high-pitched recordings. [ Music ], [ Applause ]. It turns out that the whales had started calling at higher and higher frequencies in order to hear each other over the hum of ship noise, apart from habitat displacement and communication changes. There'S also evidence that boat noise simply stresses these whales out after the September 11th attacks. Researchers in Canada's Bay of Fundy compared underwater noise levels during a period of reduced ship traffic to stress-related hormone levels in the right whale population. They discovered a six decibel noise decrease in the bay after 911, which correlated to lower baseline levels of stress-related hormones. Effects like this go all the way down the food chain. A 20-17 study found that there were two to three times more dead, ZOA plankton after a day of blasts from a single airgun and the larvae of krill, which whales rely on for food were totally destroyed. In April 2017, Donald Trump signed an executive order to open offshore drilling in the Atlantic. It directed the Interior Department to consider allowing seismic exploration by five companies that had been blocked under the Obama administration. It'S getting widespread pushback in Congress. There'S a bipartisan house bill and a democrat-led Senate bill to ban seismic testing, but if those authorizations go through, companies could be conducting seismic testing in the Atlantic by fall 2017. So is there any good news? Yes, there is, in 2014, the International Maritime Organization adopted guidelines for reducing commercial ship noise levels with things like noise, muffling, propellers and insulated engines, though they're not mandatory. Yet, a year later, the US Navy agreed to limit sonar testing, which has been linked to whale stranding themselves on beaches and habitats near Southern California and Hawaii, following a lawsuit from environmental groups and in June 2016, the National Oceanic and Atmospheric Administration laid out an ocean Noise strategy roadmap: it's the start of a ten-year plan to assess the human impact on underwater sound and the measures required to reduce it. Seismic surveys can work better too. Norway has started multi-client surveys so that seismic data from a particular area is only collected once US authorities are considering a similar process, the ocean is huge, we've explored less than 5 % of it. So far. So it's easy to forget that what we do on the surface affects everything down below, but like plastic and chemicals and waste noise pollutes our oceans and understanding that is key to doing our part to protect it. Thank you so much for watching. We love doing this collaboration of 20,000 Hertz. They create super highly produced podcasts that tell stories all about sound. If you enjoyed this video, you should absolutely go check out their podcast on the exact same topic. You can find that and subscribe at Apple podcast comm splash 20k [, Music, ]`


//TODO: replace with more accurate srt, with better chunking, once available.
    var demoSrtContent = `1
00:00:00,000 --> 00:00:06,680
Yeah this is me I'm about to go scuba diving.

2
00:00:06,680 --> 00:00:12,440
For the first time ever, I was in expecting muffled peace and quiet.

3
00:00:12,440 --> 00:00:19,960
I mean one of the earliest documentaries on underwater life was literally called the silent world.

4
00:00:19,960 --> 00:00:35,800
They roamed deep under the Mediterranean, the Red Sea and the Indian Ocean in a mysterious realm, the silent world, but as soon as I got down a few yards, I couldn't help but notice sound all around me.

5
00:00:35,800 --> 00:00:39,800
It was hard to tell what direction it was coming from or how far away it was.

6
00:00:39,800 --> 00:00:49,960
It was coming from both above me, as far as I can tell, the Earth's water is not as quiet as I thought.

7
00:00:49,960 --> 00:00:57,960
I'Ve been binging this podcast all about sound and they've, been looking into this too from the facto sound you're listening to 20,000 Hertz.

8
00:00:57,960 --> 00:01:09,210
The stories behind the world's most recognizable and interesting sounds I'm Dallas Taylor, so Dallas life underwater can be pretty loud right.

9
00:01:09,210 --> 00:01:11,080
It can just listen to these toadfish.

10
00:01:11,080 --> 00:01:31,760
They oscillate their swim bladders to make sounds that are loud enough to keep houseboat residents in Sausalito California up at night or these barred grunt fish that make a grinding sound with their teeth and their gullet or the snapping shrimp.

11
00:01:31,760 --> 00:01:39,930
They produce a sound by creating tiny, popping bubbles with their claws and it's been measured at 200 decibels.

12
00:01:39,930 --> 00:01:48,780
That'S louder than a gunshot light doesn't penetrate very deep in water.

13
00:01:48,780 --> 00:02:00,280
So a lot of ocean life has evolved to use sound as its primary sense, because water particles are more densely packed together than air sound travels farther and faster in water.

14
00:02:00,280 --> 00:02:03,400
That makes it an efficient medium of communication at any depth or time of day.

15
00:02:03,400 --> 00:02:10,240
Let'S say we had 440 is like the middle key.

16
00:02:10,240 --> 00:02:13,160
You know of your piano or whatever.

17
00:02:13,160 --> 00:02:23,240
That'S John Hildebrand he's a professor at the Scripps Institution of Oceanography, he's an expert in the field of underwater sound and how it's used by and how it affects marine mammals.

18
00:02:23,240 --> 00:02:38,590
If you looked at the wavelength of that sound in air that note the 440 note would be a little bit less than a meter long in water, it's more like several meters long!

19
00:02:38,590 --> 00:02:45,600
What that means is that noise travels about four times faster and farther in water than it does an air in an experiment.

20
00:02:45,600 --> 00:02:53,600
In 1991, sound emitted from heard island was picked up at 16 sites in the Atlantic, Pacific and Indian Oceans.

21
00:02:53,600 --> 00:02:58,760
It turns out that one of the most common noises in the entire ocean that can be picked up almost anywhere.

22
00:02:58,760 --> 00:03:00,400
These days sounds like this.

23
00:03:00,400 --> 00:03:06,520
It'S the sound of boats.

24
00:03:06,520 --> 00:03:11,600
Noise from ship traffic has doubled every decades of the 1960s.

25
00:03:11,600 --> 00:03:18,600
So, basically anywhere you go, the ambient noise in the ocean is dominated by anthropogenic sound.

26
00:03:18,600 --> 00:03:30,120
Let'S say I made a measurement 30 years ago and now, if I win to the same place and made the same measurement, it would be 10 GBS or more higher sound level than what I measured.

27
00:03:30,120 --> 00:03:33,320
When I started my career, that's okey!

28
00:03:33,320 --> 00:03:36,840
That'S a huge problem for animals that you sound is their primary sense.

29
00:03:36,840 --> 00:03:41,000
Just listen to this audio of how noise from a passing boat, totally drowns out.

30
00:03:41,000 --> 00:04:12,240
Dolphin communication, [ Applause, ], Oh, but arguably the worst culprit of underwater sound pollution is a process that sounds like this.

31
00:04:12,240 --> 00:04:13,800
This is seismic survey.

32
00:04:13,800 --> 00:04:22,980
It'S a process that allows companies to locate spots on the ocean floor where they control for fossil fuels.

33
00:04:22,980 --> 00:04:37,040
Boats with about 30 to 40 air guns that all go off at once will move back and forth over large parts of the ocean bubbles from the horns, expand and contract to the clay every 10 seconds, treating a huge amount of acoustic energy that maps geological structures.

34
00:04:37,040 --> 00:04:47,040
Deep in the ocean floor and it's about as loud as a jet at takeoff, this can go on for weeks.

35
00:04:47,040 --> 00:04:52,060
At a time.

36
00:04:52,060 --> 00:05:00,760
A study of seismic survey noise between 1999 and 2009 found that airgun sounds were recorded almost 2500 miles away from the survey ship itself.

37
00:05:00,760 --> 00:05:07,440
At some locations they were recorded on 80 % of days for over a year and that changes how animals behave.

38
00:05:07,440 --> 00:05:16,120
A study by the Institute of Marine Science at the University of North Carolina found that reef fish abundance decreased by 78 % during seismic surveys.

39
00:05:16,120 --> 00:05:29,320
This is what the reef looks like before seismic surveying in the area, and this is what it looks like after seismic surveying is a controversial topic at the coast, and new research is only adding to the conversation.

40
00:05:29,320 --> 00:05:36,640
One of those impacted is local fisherman, Jack Kok he's seen firsthand the impact seismic surveying has on fish.

41
00:05:36,640 --> 00:05:49,520
It does something we just don't catch fish for animals like whales who rely on complex, sound communication systems to socialise and find food and mate that poses a huge problem.

42
00:05:49,520 --> 00:05:59,240
If you watch this heat map from a study of endangered North Atlantic right whales, you can see that shipping past near Boston squeeze the whales into a tiny space where communication is possible.

43
00:05:59,240 --> 00:06:02,100
It'S about a third of what it was without the ships.

44
00:06:02,100 --> 00:06:03,640
Susan parks, a biology.

45
00:06:03,640 --> 00:06:15,800
Professor at Syracuse recorded right whale sounds throughout the early 2000s and when she compared her audio to some that had been recorded in 1956, she noticed the older sounds were much deeper than her high-pitched recordings.

46
00:06:15,800 --> 00:06:45,320
[ Music ], [ Applause ]. It turns out that the whales had started calling at higher and higher frequencies in order to hear each other over the hum of ship noise, apart from habitat displacement and communication changes.

47
00:06:45,320 --> 00:06:51,480
There'S also evidence that boat noise simply stresses these whales out after the September 11th attacks.

48
00:06:51,480 --> 00:07:00,880
Researchers in Canada's Bay of Fundy compared underwater noise levels during a period of reduced ship traffic to stress-related hormone levels in the right whale population.

49
00:07:00,880 --> 00:07:08,720
They discovered a six decibel noise decrease in the bay after 911, which correlated to lower baseline levels of stress-related hormones.

50
00:07:08,720 --> 00:07:11,440
Effects like this go all the way down the food chain.

51
00:07:11,440 --> 00:07:23,240
A 20-17 study found that there were two to three times more dead, ZOA plankton after a day of blasts from a single airgun and the larvae of krill, which whales rely on for food were totally destroyed.

52
00:07:23,240 --> 00:07:28,560
In April 2017, Donald Trump signed an executive order to open offshore drilling in the Atlantic.

53
00:07:28,560 --> 00:07:35,440
It directed the Interior Department to consider allowing seismic exploration by five companies that had been blocked under the Obama administration.

54
00:07:35,440 --> 00:07:37,720
It'S getting widespread pushback in Congress.

55
00:07:37,720 --> 00:07:48,260
There'S a bipartisan house bill and a democrat-led Senate bill to ban seismic testing, but if those authorizations go through, companies could be conducting seismic testing in the Atlantic by fall 2017.

56
00:07:48,260 --> 00:07:51,680
So is there any good news?

57
00:07:51,680 --> 00:08:04,520
Yes, there is, in 2014, the International Maritime Organization adopted guidelines for reducing commercial ship noise levels with things like noise, muffling, propellers and insulated engines, though they're not mandatory.

58
00:08:04,520 --> 00:08:32,200
Yet, a year later, the US Navy agreed to limit sonar testing, which has been linked to whale stranding themselves on beaches and habitats near Southern California and Hawaii, following a lawsuit from environmental groups and in June 2016, the National Oceanic and Atmospheric Administration laid out an ocean Noise strategy roadmap: it's the start of a ten-year plan to assess the human impact on underwater sound and the measures required to reduce it.

59
00:08:32,200 --> 00:08:34,200
Seismic surveys can work better too.

60
00:08:34,200 --> 00:08:50,800
Norway has started multi-client surveys so that seismic data from a particular area is only collected once US authorities are considering a similar process, the ocean is huge, we've explored less than 5 % of it.

61
00:08:50,800 --> 00:08:51,630
So far.

62
00:08:51,630 --> 00:09:05,960
So it's easy to forget that what we do on the surface affects everything down below, but like plastic and chemicals and waste noise pollutes our oceans and understanding that is key to doing our part to protect it.

63
00:09:05,960 --> 00:09:11,440
Thank you so much for watching.

64
00:09:11,440 --> 00:09:13,760
We love doing this collaboration of 20,000 Hertz.

65
00:09:13,760 --> 00:09:18,080
They create super highly produced podcasts that tell stories all about sound.

66
00:09:18,080 --> 00:09:22,600
If you enjoyed this video, you should absolutely go check out their podcast on the exact same topic.

67
00:09:22,600 --> 00:09:28,400
You can find that and subscribe at Apple podcast comm splash 20k [, Music, ]
`
    
    }
    
  </script>
</html>

<!-- <track kind="subtitles" label="English subtitles" src="subtitles_en.vtt" srclang="en" default></track> -->
